* CAS

** 什么是 cas 

cas （compare and swap/set） 比较并替换，cas 算法过程是这样的 有三个参数， cas（v,e,n) 
v 标识要更新的变量，e 表示预期值 旧的值，N 表示新的值。当v和e 相等的时候 将 v 的值设置为N 如果v和 e 不相登，说明有其他线程做了更新，
当前就什么都步操作，最后返v 的真是值。 

cas 是乐观态度进行的，他从事任务之际可以成功完成操作。当多个线程 cas 操作一个变量时，只会有一个胜出，并且成功更新，其余均失败。 失败的线程不会被挂起
而且再次尝试，

** ABA 问题

cas 会导致 aba 的问题，cas 算法是取出内存某个时刻的数据，在当时比较并且替换， 这个中间时间差会导致数据可能有变化。
第二个线程 将数据 由 A 更改到 B ,在更改回A 。一线程比较的时候发现变量还是A 结果就执行成功了，但是这个时候，业务上可能会有问题。
通过给变量增加版本号可以避免这个问题。


